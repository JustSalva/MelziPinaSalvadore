\subsection{Authentication}
\label{subsect:Authentication}
When the users log into the system for the first time from a device, the Application server will assign to that device an univocal code, so for further requests from that device (web browser or mobile application) the users can avoid to login again. Every new request will include into the request payload that code, enabling the Application server to validate the request and to recognize the specific user that sent them. The univocal code will be generated by an internal algorithm in the AuthenticationManager (explained in section \ref{sect: Univocal code}). The AuthenticationManager will check every time the consistency of the univocal code and it will also check if it comes from the same device it is associated to.
If a log in is performed from an already registered device but it comes from a different Travlendar+ account, the previous univocal code associated to that device will be deleted, and the previous user will have to log in again with his previous account.

\subsection{Encryption}
\label{subsect:Encryption}
The encryption is used only to send password from the client to the server. For the other operations, in fact, the client exploits the univocal code described below in order to authenticate itself. This code is used in combination with the ID of the device that sends the request, so encryption for the univocal code is not necessary.\\
To encrypt the password is suitable a \textit{public key algorithm} because it allows to send the string in a secure and easy way on internet and the size of data to encrypt is small.\\
A public key algorithm uses a pair of keys: a \textit{public key} distributed to the clients and a \textit{private key} known only by the server. The client encrypts the password with the public key and sends it to the server; the server is the only one able to decrypt the message thanks to the private key.\\
The encryption in the system is implemented according to the \textit{RSA algorithm}.

\subsection{Notifications}
\label{subsect: Notifications}
In order to send notifications to the mobile devices our system will memorize the Identifiers of the user devices, and when a notification is to be sent the Application Server will interact with the interfaces offered by \textit{GCM} (\textit{Google Cloud Messaging}) in order to actually forward them to the user devices. We choose to use \textit{GCM} services cause they handle all aspects of queuing of messages and  delivering to client applications that runs on different target devices, and also because it is completely free.

\subsection{Local database update}
\label{subsect:Local database update}
When the application performs an operation that requires a connection, both online and local database are updated. The user however can perform an operation on a different mobile device or with a browser, in these cases the local database of the application must be updated.\\
When the online database is modified, the system sends a notification to all the mobile devices related to the user whose local database isn't updated yet. The notification mechanism works as specified in section \ref{subsect: Notifications}. Only the changes made after the last writing operation on local database are sent from server to local DB, in order to update it.

\subsection{Periodic events}
\label{subsect:Periodic events}
Once a day, an internal module is run to check that every periodical event inserted by a user is covered for a year, e.g. if an event like "Friday lunch with parents" with a weekly periodicity is created on 2018/01/05, on 2018/01/12 the module will create a new event on 2019/01/12.
